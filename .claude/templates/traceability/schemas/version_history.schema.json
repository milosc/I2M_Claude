{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://htec.ai/schemas/version-history.schema.json",
  "title": "Global Traceability Version History",
  "description": "A strongly-typed audit trail of every modification made by the HTEC AI I2M framework across all stages.",
  "type": "object",
  "required": ["system_name", "history"],
  "properties": {
    "system_name": {
      "type": "string",
      "description": "The name of the system or product being developed (e.g., InventorySystem)."
    },
    "history": {
      "type": "array",
      "description": "A chronological list of all file changes and framework actions.",
      "items": {
        "type": "object",
        "required": [
          "timestamp",
          "stage",
          "author",
          "version",
          "action",
          "file",
          "reason",
          "references"
        ],
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "ISO 8601 timestamp of when the change was logged."
          },
          "stage": {
            "type": "string",
            "enum": ["discovery", "prototype", "productspecs", "solarch", "implementation", "governance"],
            "description": "The framework pipeline stage where the change occurred."
          },
          "author": {
            "type": "string",
            "description": "The entity that performed the action (e.g., 'Claude', 'System', a specific skill name, or 'human')."
          },
          "version": {
            "type": "string",
            "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$",
            "description": "The semantic version (Major.Minor.Patch) assigned to the file after this change."
          },
          "action": {
            "type": "string",
            "enum": ["creation", "modification", "deletion"],
            "description": "The type of file operation performed."
          },
          "file": {
            "type": "string",
            "description": "The relative path to the file that was created, modified, or deleted."
          },
          "reason": {
            "type": "string",
            "description": "A single, concise sentence explaining why the change was necessary."
          },
          "references": {
            "type": "array",
            "items": {
              "type": "string",
              "pattern": "^[A-Z]+-[0-9\\.]+$"
            },
            "description": "A list of traceability IDs (e.g., PP-1.1, JTBD-5, US-001) that justify this change."
          }
        }
      }
    }
  }
}