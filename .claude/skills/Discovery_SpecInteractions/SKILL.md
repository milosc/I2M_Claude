---
name: specifying-interaction-patterns
description: Use when you need to define interaction patterns, behaviors, animations, and state management rules in interaction-patterns.md.
model: sonnet
allowed-tools: Bash, Edit, Grep, Read, Write
hooks:
  PreToolUse:
    - matcher: "*"
      once: true
      hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" skill specifying-interaction-patterns started '{"stage": "discovery"}'
  Stop:
    - hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" skill specifying-interaction-patterns ended '{"stage": "discovery"}'
---

# Spec Interactions

## FIRST ACTION (MANDATORY)

Before doing ANYTHING else, run this command:

```bash
bash .claude/hooks/log-lifecycle.sh skill specifying-interaction-patterns instruction_start '{"stage": "discovery", "method": "instruction-based"}'
```

> **Implements**: [VERSION_CONTROL_STANDARD.md](../VERSION_CONTROL_STANDARD.md) for output file versioning
> **Supports**: Smart Obsolescence Handling for non-UI projects

## Metadata
- **Skill ID**: Discovery_SpecInteractions
- **Version**: 4.0.0
- **Created**: 2025-01-15
- **Updated**: 2025-12-26
- **Change History**:
  - v4.0.0 (2025-12-26): Added NOT_APPLICABLE handling for non-UI projects
  - v3.0.0 (2025-12-21): Enforced lowercase with dashes file naming (interaction-patterns.md)
  - v2.1.0 (2025-12-19): Added version control metadata per VERSION_CONTROL_STANDARD.md
  - v2.0.0 (2025-01-15): Initial skill version for Discovery Skills Framework v2.0

## Description
Defines interaction patterns, behaviors, animations, and state management rules. Documents how the application responds to user actions, handles loading/error states, and manages transitions.

**Role**: You are an interaction designer who specializes in defining responsive, intuitive behaviors that provide clear feedback and guide users through tasks.

## Execution Logging

This skill uses **deterministic lifecycle logging** via frontmatter hooks.

**Events logged automatically:**
- `skill:specifying-interaction-patterns:started` - When skill begins
- `skill:specifying-interaction-patterns:ended` - When skill finishes

**Log file:** `_state/lifecycle.json`

---

## Trigger Conditions

- User requests "define interactions", "create behavior specs", "design patterns"
- Discovery Orchestrator invokes during design specification phase
- User needs to document application behaviors and responses

## Input Requirements

| Input | Required | Source |
|-------|----------|--------|
| screen-definitions.md | Yes | 04-design-specs/ |
| navigation-structure.md | Yes | 04-design-specs/ |
| ui-components.md | Yes | 04-design-specs/ |

## Applicability Check (Smart Obsolescence Handling)

**BEFORE generating interaction patterns**, check project classification:

```
1. Read _state/discovery_config.json
2. Check project_classification.type
3. IF type IN [BACKEND_ONLY, DATABASE_ONLY, INTEGRATION, INFRASTRUCTURE]:
   ‚Üí Generate NOT_APPLICABLE placeholder (see below)
   ‚Üí SKIP full interaction specification
4. IF type == FULL_STACK:
   ‚Üí Proceed with normal interaction specification
```

### NOT_APPLICABLE Output Template

When project type does not require UI artifacts, generate this placeholder:

```markdown
# Interaction Patterns

---
status: NOT_APPLICABLE
artifact: interaction-patterns
project_type: [BACKEND_ONLY|DATABASE_ONLY|INTEGRATION|INFRASTRUCTURE]
classification_date: [ISO timestamp from discovery_config.json]
generated_date: [Current ISO timestamp]
---

## Reason

This artifact is not applicable for **[PROJECT_TYPE]** projects.

Interaction patterns are only generated for projects with user interface components (FULL_STACK).

## Project Classification

- **Type**: [PROJECT_TYPE]
- **Confidence**: [HIGH|MEDIUM|LOW]
- **Classified**: [Date]

## What This Means

- No interaction patterns will be specified for this project
- Downstream Prototype phase will skip interaction generation
- Focus remains on [API contracts|Data models|Integration specs|Infrastructure configs]

## Alternative Artifacts

For this project type, refer to:
- `data-fields.md` - Data contract definitions (if applicable)
- `PRODUCT_ROADMAP.md` - Feature specifications
- `JOBS_TO_BE_DONE.md` - User/system jobs

---
*Generated by Discovery_SpecInteractions v4.0.0*
*Smart Obsolescence Handling enabled*
```

## CRITICAL OUTPUT REQUIREMENTS

### File Name (MANDATORY)

```
[output_path]/04-design-specs/interaction-patterns.md
```

**File naming**: lowercase with dashes - `interaction-patterns.md`

## Output Specification

### Primary Output: `04-design-specs/interaction-patterns.md`

```markdown
# Interaction Patterns

**Created**: [Date]
**Application**: [Product Name]

---

## üîÑ Common Behaviors

### Search

| Aspect | Specification |
|--------|---------------|
| Trigger | Keystroke in search field |
| Debounce | 300ms delay |
| Results | Dropdown below input |
| Empty | "No results found" message |
| Keyboard | Arrow keys navigate, Enter selects |

### Filtering

| Aspect | Specification |
|--------|---------------|
| Trigger | Change in filter control |
| Feedback | Filter chips appear |
| Clear | "√ó" on chip, "Clear all" link |
| Persistence | URL params for sharing |

### Sorting

| Aspect | Specification |
|--------|---------------|
| Trigger | Click on sortable header |
| Indicator | Arrow icon (‚Üë/‚Üì) |
| Default | Most recent first |
| Multi-sort | Shift+click for secondary |

### Pagination

| Aspect | Specification |
|--------|---------------|
| Default | 10 items per page |
| Options | 10, 25, 50, 100 |
| Navigation | Prev/Next + page numbers |
| Scroll | Return to top on page change |

---

## üíæ CRUD Operations

### Create

| Step | Action | Feedback |
|------|--------|----------|
| Initiate | Click "Create" button | Open modal/form |
| Submit | Click "Save" | Button shows loading |
| Success | Server responds | Toast + close + refresh list |
| Error | Validation fails | Inline errors on fields |

### Read (Detail View)

| Step | Action | Feedback |
|------|--------|----------|
| Navigate | Click list item | Navigate to detail |
| Load | Fetch data | Skeleton loader |
| Display | Data arrives | Populate fields |
| Error | Fetch fails | Error state + retry |

### Update

| Step | Action | Feedback |
|------|--------|----------|
| Edit | Click "Edit" | Fields become editable |
| Change | Modify field | Unsaved indicator |
| Save | Click "Save" | Optimistic update + toast |
| Cancel | Click "Cancel" | Confirm if unsaved changes |

### Delete

| Step | Action | Feedback |
|------|--------|----------|
| Initiate | Click "Delete" | Confirmation modal |
| Confirm | Click "Yes, delete" | Button loading |
| Success | Server confirms | Toast + remove from list |
| Error | Deletion fails | Error toast + retry |

---

## üìä State Management

### Loading States

| Context | Pattern | Duration Trigger |
|---------|---------|------------------|
| Initial page load | Full skeleton | >200ms |
| List refresh | Inline spinner | >100ms |
| Button action | Button spinner | Immediate |
| Image | Placeholder | Until loaded |

### Empty States

| Context | Display |
|---------|---------|
| No data (first use) | Illustration + "Get started" CTA |
| No results (filtered) | "No matches" + "Clear filters" link |
| No items (deleted all) | "Add your first..." prompt |

### Error States

| Type | Display | Recovery |
|------|---------|----------|
| Validation | Inline red text below field | Fix and resubmit |
| Network | Toast + retry option | Retry button |
| Server | Full error screen | Reload page |
| Timeout | "Taking too long" + cancel | Cancel or wait |

---

## üé¨ Transitions & Animations

### Navigation

| Transition | Animation | Duration |
|------------|-----------|----------|
| Page change | Fade in | 200ms |
| Modal open | Fade + scale up | 200ms |
| Modal close | Fade out | 150ms |
| Sidebar toggle | Slide | 200ms |

### Micro-interactions

| Element | Interaction | Animation |
|---------|-------------|-----------|
| Button | Hover | Background darken (100ms) |
| Card | Hover | Slight lift + shadow (150ms) |
| Checkbox | Check | Scale bounce (100ms) |
| Toggle | Switch | Slide (150ms) |

### Data Updates

| Update Type | Animation |
|-------------|-----------|
| New item added | Slide in from top |
| Item removed | Fade out + collapse |
| Status change | Flash highlight |
| Count update | Counter animation |

---

## ‚úã Gesture Support (Touch)

| Gesture | Action | Context |
|---------|--------|---------|
| Tap | Select/activate | All interactive |
| Long press | Context menu | Cards, list items |
| Swipe left | Delete/archive | List items |
| Swipe right | Mark complete | Tasks |
| Pull down | Refresh | Lists |
| Pinch | Zoom | Images |

---

## ‚å®Ô∏è Keyboard Shortcuts

### Global

| Shortcut | Action |
|----------|--------|
| `/` | Focus search |
| `?` | Show shortcuts help |
| `Esc` | Close modal/cancel |

### Navigation

| Shortcut | Action |
|----------|--------|
| `g` then `d` | Go to Dashboard |
| `g` then `c` | Go to Candidates |
| `j` / `k` | Next/Previous in list |

### Actions

| Shortcut | Action |
|----------|--------|
| `n` | New item |
| `e` | Edit selected |
| `Enter` | Open selected |
| `Delete` | Delete selected |

---

## üì± Responsive Behavior

### Breakpoint Behaviors

| Feature | Desktop | Tablet | Mobile |
|---------|---------|--------|--------|
| Sidebar | Visible | Toggle | Hidden |
| Table | Full | Scroll | Cards |
| Actions | Visible | Icons | Menu |
| Modal | Center | Center | Full-screen |

---

## ‚ö†Ô∏è Feedback Patterns

### Success Feedback

```
[‚úì] [Message]                    [√ó]
    ‚îî‚îÄ‚îÄ Green toast, top-right, 3s auto-dismiss
```

### Error Feedback

```
[‚úó] [Message]           [Retry] [√ó]
    ‚îî‚îÄ‚îÄ Red toast, persistent until dismissed
```

### Progress Feedback

```
[Uploading... 45%] [‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë]
    ‚îî‚îÄ‚îÄ Progress bar for operations >2s
```

---

**Document Status**: üü¢ Complete
```

## Quality Criteria

- [ ] All CRUD operations documented
- [ ] Loading/empty/error states defined
- [ ] Transitions specified with durations
- [ ] Keyboard navigation complete
- [ ] Touch gestures documented
- [ ] Responsive behaviors specified

## Integration Points

### Receives From
- Discovery_SpecScreens: Context for behaviors
- Discovery_SpecNavigation: Flow requirements
- Discovery_SpecComponents: Component states

### Provides To
- Prototype development: Behavior implementation
- QA testing: Expected behaviors

## State Management Reminder

‚ö†Ô∏è **This skill produces output files only.** The calling orchestrator/command is responsible for updating state after all Phase 9 skills complete.

**After running ALL Phase 9 skills, update state:**
```bash
python3 .claude/skills/tools/update_discovery_state.py --phase 9_specs --status complete
```

**Or manually update `_state/discovery_progress.json`:**
```json
"9_specs": { "status": "complete", "started": "<ISO>", "completed": "<ISO>" },
"overall_progress": 80,
"resumable_from": "10_docs"
```

---

**Skill Version**: 4.0.0
**Output Location**: 04-design-specs/interaction-patterns.md
**N/A Support**: Yes (for non-UI project types)
