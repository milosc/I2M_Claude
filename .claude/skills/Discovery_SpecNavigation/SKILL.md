---
name: specifying-navigation-flows
description: Use when you need to define the application's navigation structure, user flows, and screen transitions in navigation-flows.md.
model: sonnet
allowed-tools: Bash, Edit, Grep, Read, Write
hooks:
  PreToolUse:
    - matcher: "*"
      once: true
      hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" skill specifying-navigation-flows started '{"stage": "discovery"}'
  Stop:
    - hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" skill specifying-navigation-flows ended '{"stage": "discovery"}'
---

# Spec Navigation

## FIRST ACTION (MANDATORY)

Before doing ANYTHING else, run this command:

```bash
bash .claude/hooks/log-lifecycle.sh skill specifying-navigation-flows instruction_start '{"stage": "discovery", "method": "instruction-based"}'
```

> **Implements**: [VERSION_CONTROL_STANDARD.md](../VERSION_CONTROL_STANDARD.md) for output file versioning
> **Supports**: Smart Obsolescence Handling for non-UI projects

## Metadata
- **Skill ID**: Discovery_SpecNavigation
- **Version**: 4.0.0
- **Created**: 2025-01-15
- **Updated**: 2025-12-26
- **Change History**:
  - v4.0.0 (2025-12-26): Added NOT_APPLICABLE handling for non-UI projects
  - v3.1.0 (2025-12-21): Standardized output filename to navigation-flows.md for consistency with quality gates
  - v3.0.0 (2025-12-21): Enforced lowercase with dashes file naming (navigation-structure.md)
  - v2.1.0 (2025-12-19): Added version control metadata per VERSION_CONTROL_STANDARD.md
  - v2.0.0 (2025-01-15): Initial skill version for Discovery Skills Framework v2.0

## Description
Defines the navigation structure, user flows, and screen transitions. Creates site maps, menu hierarchies, and step-by-step user journey documentation.

**Role**: You are a UX flow specialist who excels at creating intuitive navigation patterns and documenting user journeys through applications.

## Execution Logging

This skill uses **deterministic lifecycle logging** via frontmatter hooks.

**Events logged automatically:**
- `skill:specifying-navigation-flows:started` - When skill begins
- `skill:specifying-navigation-flows:ended` - When skill finishes

**Log file:** `_state/lifecycle.json`

---

## Trigger Conditions

- User requests "define navigation", "create user flows", "design site map"
- Discovery Orchestrator invokes during design specification phase
- User needs to map how users move through the application

## Input Requirements

| Input | Required | Source |
|-------|----------|--------|
| screen-definitions.md | Yes | 04-design-specs/ |
| jtbd-jobs-to-be-done.md | Yes | 02-research/ |
| persona-*.md files | Yes | 02-research/ |

## Applicability Check (Smart Obsolescence Handling)

**BEFORE generating navigation flows**, check project classification:

```
1. Read _state/discovery_config.json
2. Check project_classification.type
3. IF type IN [BACKEND_ONLY, DATABASE_ONLY, INTEGRATION, INFRASTRUCTURE]:
   ‚Üí Generate NOT_APPLICABLE placeholder (see below)
   ‚Üí SKIP full navigation specification
4. IF type == FULL_STACK:
   ‚Üí Proceed with normal navigation specification
```

### NOT_APPLICABLE Output Template

When project type does not require UI artifacts, generate this placeholder:

```markdown
# Navigation Flows

---
status: NOT_APPLICABLE
artifact: navigation-flows
project_type: [BACKEND_ONLY|DATABASE_ONLY|INTEGRATION|INFRASTRUCTURE]
classification_date: [ISO timestamp from discovery_config.json]
generated_date: [Current ISO timestamp]
---

## Reason

This artifact is not applicable for **[PROJECT_TYPE]** projects.

Navigation flows are only generated for projects with user interface components (FULL_STACK).

## Project Classification

- **Type**: [PROJECT_TYPE]
- **Confidence**: [HIGH|MEDIUM|LOW]
- **Classified**: [Date]

## What This Means

- No navigation structure will be specified for this project
- Downstream Prototype phase will skip UI navigation generation
- Focus remains on [API contracts|Data models|Integration specs|Infrastructure configs]

## Alternative Artifacts

For this project type, refer to:
- `data-fields.md` - Data contract definitions (if applicable)
- `PRODUCT_ROADMAP.md` - Feature specifications
- `JOBS_TO_BE_DONE.md` - User/system jobs

---
*Generated by Discovery_SpecNavigation v4.0.0*
*Smart Obsolescence Handling enabled*
```

## CRITICAL OUTPUT REQUIREMENTS

### File Name (MANDATORY)

```
[output_path]/04-design-specs/navigation-flows.md
```

**File naming**: lowercase with dashes - `navigation-flows.md`

‚ö†Ô∏è **NOTE**: This file is validated by quality gates checkpoint 9. Using any other filename will cause validation to FAIL.

## Output Specification

### Primary Output: `04-design-specs/navigation-flows.md`

```markdown
# Navigation & User Flows

**Created**: [Date]
**Application**: [Product Name]

---

## üß≠ Site Map

### Primary Navigation (Sidebar)

```
‚îú‚îÄ‚îÄ Dashboard
‚îú‚îÄ‚îÄ [Module 1]
‚îÇ   ‚îú‚îÄ‚îÄ [Sub-item 1.1]
‚îÇ   ‚îî‚îÄ‚îÄ [Sub-item 1.2]
‚îú‚îÄ‚îÄ [Module 2]
‚îÇ   ‚îú‚îÄ‚îÄ [Sub-item 2.1]
‚îÇ   ‚îú‚îÄ‚îÄ [Sub-item 2.2]
‚îÇ   ‚îî‚îÄ‚îÄ [Sub-item 2.3]
‚îî‚îÄ‚îÄ Settings
```

### Utility Navigation (Header)

```
[Search] [Notifications] [User Menu]
                              ‚îú‚îÄ‚îÄ Profile
                              ‚îú‚îÄ‚îÄ Settings
                              ‚îî‚îÄ‚îÄ Logout
```

---

## üîÄ Key User Flows

### Flow 1: [Task Name from JTBD]

**JTBD**: [Reference]
**Primary Persona**: [Persona name]
**Goal**: [What user achieves]

#### Steps

1. **[Screen A]**
   - User action: [What they do]
   - System response: [What happens]

2. **[Modal/Screen B]**
   - User action: [What they do]
   - System response: [What happens]

3. **[Screen C]**
   - User action: [What they do]
   - Success state: [End result]

#### Flow Diagram

```
[Dashboard] ‚îÄ‚îÄclick‚îÄ‚îÄ‚ñ∂ [List View] ‚îÄ‚îÄselect‚îÄ‚îÄ‚ñ∂ [Detail]
                                                   ‚îÇ
                                              ‚îÄ‚îÄedit‚îÄ‚îÄ‚ñ∂ [Modal]
                                                   ‚îÇ
                                              ‚îÄ‚îÄsave‚îÄ‚îÄ‚ñ∂ [Success]
```

#### Error Paths

| Error | From | Recovery |
|-------|------|----------|
| [Error type] | Step [N] | [Recovery action] |

---

### Flow 2: [Task Name]

[Same structure]

---

## üì± Responsive Navigation

| Breakpoint | Navigation Pattern |
|------------|-------------------|
| Desktop | Persistent sidebar |
| Tablet | Collapsible sidebar |
| Mobile | Hamburger menu + bottom tabs |

---

## ‚å®Ô∏è Keyboard Navigation

| Key | Action |
|-----|--------|
| Tab | Move to next element |
| Shift+Tab | Move to previous |
| Enter | Activate |
| Escape | Close modal/cancel |
| Arrow keys | Navigate within lists |

---

**Document Status**: üü¢ Complete
```

## Quality Criteria

- [ ] All screens represented in site map
- [ ] Critical JTBD have documented flows
- [ ] Error paths defined
- [ ] Responsive patterns documented
- [ ] Keyboard navigation specified

## Integration Points

### Receives From
- Discovery_SpecScreens: Screen inventory
- Discovery_GenerateJTBD: Task definitions

### Provides To
- Prototype development: Flow implementation
- Discovery_SpecInteractions: Transition patterns

## State Management Reminder

‚ö†Ô∏è **This skill produces output files only.** The calling orchestrator/command is responsible for updating state after all Phase 9 skills complete.

**After running ALL Phase 9 skills, update state:**
```bash
python3 .claude/skills/tools/update_discovery_state.py --phase 9_specs --status complete
```

**Or manually update `_state/discovery_progress.json`:**
```json
"9_specs": { "status": "complete", "started": "<ISO>", "completed": "<ISO>" },
"overall_progress": 80,
"resumable_from": "10_docs"
```

---

**Skill Version**: 4.0.0
**Output Location**: 04-design-specs/navigation-flows.md
**N/A Support**: Yes (for non-UI project types)
