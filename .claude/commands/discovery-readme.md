---
name: discovery-readme
description: Generate Discovery README with overview and structure
argument-hint: None
model: claude-haiku-4-5-20250515
allowed-tools: Read, Write, Edit
hooks:
  PreToolUse:
    - matcher: "*"
      once: true
      hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" command /discovery-readme started '{"stage": "discovery"}'
  Stop:
    - hooks:
        # VALIDATION: Check README.md was created
        - type: command
          command: >-
            uv run "$CLAUDE_PROJECT_DIR/.claude/hooks/validators/validate_files_exist.py"
            --directory "ClientAnalysis_$(cat _state/discovery_config.json 2>/dev/null | grep -o '"system_name"[[:space:]]*:[[:space:]]*"[^"]*"' | cut -d'"' -f4)/05-documentation"
            --requires "README.md"
        # VALIDATION: Check README has required sections
        - type: command
          command: >-
            uv run "$CLAUDE_PROJECT_DIR/.claude/hooks/validators/validate_file_contains.py"
            --directory "ClientAnalysis_$(cat _state/discovery_config.json 2>/dev/null | grep -o '"system_name"[[:space:]]*:[[:space:]]*"[^"]*"' | cut -d'"' -f4)/05-documentation"
            --pattern "README.md"
            --contains "## Overview"
            --contains "## Vision"
        # LOGGING: Record command completion
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" command /discovery-readme ended '{"stage": "discovery", "validated": true}'
---

## FIRST ACTION (MANDATORY)

Before doing ANYTHING else, run these commands:

```bash
# 1. Update session context
bash "$CLAUDE_PROJECT_DIR/.claude/hooks/session-update.sh" --project "{SystemName}" --stage "discovery"

# 2. Log command start
bash .claude/hooks/log-lifecycle.sh command /discovery-readme instruction_start '{"stage": "discovery", "method": "instruction-based"}'
```

## Rules Loading (On-Demand)

This command requires Discovery-specific rules. Load them now:

```bash
# Load Discovery rules (includes PDF handling, input processing, output structure)
/rules-discovery

# Load Traceability rules (includes ID formats, source linking)
/rules-traceability
```

## Arguments

None required - reads configuration from `_state/discovery_config.json`

## Prerequisites

- All previous phases complete
- Key documents exist (Vision, Roadmap)

## Skills Used

- `.claude/skills/Discovery_DocSummary/Discovery_DocSummary.md` - CRITICAL: Read entire skill

## Execution Steps

1. **Load State**
   - Read `_state/discovery_config.json` for system_name
   - Read `03-strategy/product-vision.md` for vision summary
   - Read `03-strategy/product-roadmap.md` for phase overview

2. **Read Discovery_DocSummary Skill**
   - Understand README structure
   - Review project overview format

3. **Generate README Document**
   - Create `05-documentation/README.md`
   - Include version metadata:
     ```yaml
     ---
     document_id: DISC-README-<SystemName>
     version: 1.0.0
     created_at: <YYYY-MM-DD>
     updated_at: <YYYY-MM-DD>
     generated_by: Discovery_DocSummary
     ---
     ```

4. **Content Structure**
   ```markdown
   # <SystemName> - Product Discovery Documentation

   ## Overview

   [Brief description of the product/system from vision document]

   ## Vision

   > [Vision statement from product-vision.md]

   ## Key Personas

   | Persona | Role | Primary Need |
   |---------|------|--------------|
   | [Name] | [Role] | [Need] |

   ## Problem Statement

   This product addresses the following critical pain points:

   1. **[Pain Point 1]** - [Brief description]
   2. **[Pain Point 2]** - [Brief description]
   3. **[Pain Point 3]** - [Brief description]

   ## Solution Overview

   [High-level description of solution approach]

   ## Roadmap Summary

   | Phase | Focus | Key Deliverables |
   |-------|-------|------------------|
   | Phase 1 | Foundation | [Features] |
   | Phase 2 | Core | [Features] |
   | Phase 3 | Advanced | [Features] |

   ## Documentation Structure

   ```
   ClientAnalysis_<SystemName>/
   ├── 00-management/     # Progress tracking
   ├── 01-analysis/       # Research findings
   ├── 02-research/       # Personas & JTBD
   ├── 03-strategy/       # Vision & roadmap
   ├── 04-design-specs/   # Technical specs
   └── 05-documentation/  # This folder
   ```

   ## Quick Links

   - [Getting Started](GETTING_STARTED.md) - Where to begin
   - [Documentation Summary](DOCUMENTATION_SUMMARY.md) - Executive overview
   - [Full Index](INDEX.md) - Complete document list

   ## Key Documents

   | Document | Purpose |
   |----------|---------|
   | Product Vision | Strategic direction |
   | Product Roadmap | Delivery plan |
   | Screen Definitions | UI specifications |
   | Data Fields | Data model |

   ## Generated By

   This documentation was generated using the Discovery Skills Framework v2.0.

   **Discovery Date**: [Date]
   **Framework Version**: 2.0
   ```

### Step 5: Log Command End (MANDATORY)

```bash
# Log command completion - MUST RUN LAST

echo "✅ Logged command completion"
```

## Quality Checklist

- [ ] Vision statement included
- [ ] Key personas summarized
- [ ] Pain points highlighted
- [ ] Roadmap phases listed
- [ ] Document structure explained
- [ ] Quick links functional

## Outputs

- `ClientAnalysis_<SystemName>/05-documentation/README.md`

## Next Command

- Run `/discovery-summary` for documentation summary
- Or run `/discovery-docs-all` for all documentation
