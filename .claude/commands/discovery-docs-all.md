---
description: Generate all Discovery documentation files
model: claude-haiku-4-5-20250515
allowed-tools: Read, Write, Edit
hooks:
  PreToolUse:
    - matcher: "*"
      once: true
      hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" command /discovery-docs-all started '{"stage": "discovery"}'
  Stop:
    - hooks:
        - type: command
          command: "$CLAUDE_PROJECT_DIR/.claude/hooks/log-lifecycle.sh" command /discovery-docs-all ended '{"stage": "discovery"}'
---


# /discovery-docs-all - Generate All Documentation

## FIRST ACTION (MANDATORY)

Before doing ANYTHING else, run these commands:

```bash
# 1. Update session context
bash "$CLAUDE_PROJECT_DIR/.claude/hooks/session-update.sh" --project "{SystemName}" --stage "discovery"

# 2. Log command start
bash .claude/hooks/log-lifecycle.sh command /discovery-docs-all instruction_start '{"stage": "discovery", "method": "instruction-based"}'
```

## Rules Loading (On-Demand)

This command requires Discovery-specific rules. Load them now:

```bash
# Load Discovery rules (includes PDF handling, input processing, output structure)
/rules-discovery

# Load Traceability rules (includes ID formats, source linking)
/rules-traceability
```

## Arguments

None required - reads configuration from `_state/discovery_config.json`

## Prerequisites

- `/discovery-specs-all` completed (phase 9 complete)
- **Checkpoint 9 validation PASSED**
- `_state/discovery_progress.json` shows phase 9 complete
- All previous output folders populated (01-analysis through 04-design-specs)

## üö® MANDATORY Skills and Outputs (ALL 5 files required)

| # | File | Generated By | REQUIRED |
|---|------|--------------|----------|
| 1 | `05-documentation/INDEX.md` | Discovery_DocIndex | ‚úÖ YES |
| 2 | `05-documentation/README.md` | Discovery_DocIndex | ‚úÖ YES |
| 3 | `05-documentation/GETTING_STARTED.md` | Discovery_DocIndex | ‚úÖ YES |
| 4 | `05-documentation/FILES_CREATED.md` | Discovery_DocIndex | ‚úÖ YES |
| 5 | `05-documentation/DOCUMENTATION_SUMMARY.md` | Discovery_DocSummary | ‚úÖ YES |

## Skills Used

- `.claude/skills/Discovery_DocIndex/Discovery_DocIndex.md` ‚Üí Generates 4 files
- `.claude/skills/Discovery_DocSummary/Discovery_DocSummary.md` ‚Üí Generates 1 file

## Execution Steps

### Phase 10: Generate Documentation

1. **Load Prerequisites**
   - Read `_state/discovery_config.json` for output_path and system_name
   - Inventory all generated files in `ClientAnalysis_<SystemName>/`
   - Read `traceability/trace_matrix.json` for coverage statistics

2. **Update Progress**
   - Set phase `10_docs` status to "in_progress"

### 10.1: INDEX.md

3. **Read Discovery_DocIndex Skill**
   - Understand index structure
   - Define navigation hierarchy

4. **Generate Index Document**
   - Create `05-documentation/INDEX.md`
   - Include version metadata:
     ```yaml
     ---
     document_id: DISC-INDEX-<SystemName>
     version: 1.0.0
     created_at: <YYYY-MM-DD>
     updated_at: <YYYY-MM-DD>
     generated_by: Discovery_DocIndex
     source_files:
       - ClientAnalysis_<SystemName>/**/*
     ---
     ```
   - Create navigation structure to all documents
   - Group by folder (00-management, 01-analysis, etc.)
   - Include brief descriptions of each document

### 10.2: README.md

5. **Read Discovery_DocSummary Skill**
   - Understand README structure
   - Define project overview format

6. **Generate README Document**
   - Create `05-documentation/README.md`
   - Include version metadata
   - Project overview and purpose
   - Quick links to key documents
   - Technology stack (if identified)
   - Team and contact info (if available)

### 10.3: DOCUMENTATION_SUMMARY.md

7. **Generate Documentation Summary**
   - Create `05-documentation/DOCUMENTATION_SUMMARY.md`
   - Include version metadata
   - Executive summary of findings
   - Key statistics:
     - Number of personas
     - Number of pain points by severity
     - Number of JTBDs
     - Number of features/screens
   - Traceability coverage summary
   - Recommendations

### 10.4: GETTING_STARTED.md

8. **Generate Getting Started Guide**
   - Create `05-documentation/GETTING_STARTED.md`
   - Include version metadata
   - Reading order for stakeholders
   - Reading order for developers
   - Reading order for designers
   - Key documents for each audience

### 10.5: FILES_CREATED.md

9. **Generate Files Created List**
   - Create `05-documentation/FILES_CREATED.md`
   - Include version metadata
   - Complete list of all generated files
   - File descriptions and purposes
   - File sizes and timestamps
   - Dependency relationships

### 10.6: TRACEABILITY_MATRIX_MASTER.md

10. **Generate Traceability Report**
    - Create `traceability/TRACEABILITY_MATRIX_MASTER.md`
    - Include version metadata
    - Human-readable traceability chains
    - Format per helperFils/TRACEABILITY_MATRIX_MASTER.md template:
      ```markdown
      ## Traceability Chain: [Chain ID]

      | Stage | Artifact | ID | Description |
      |-------|----------|-----|-------------|
      | Client Fact | CF-1.1 | ... | ... |
      | Pain Point | PP-1.1 | ... | ... |
      | JTBD | JTBD-1.1 | ... | ... |
      | Feature | US-1.1 | ... | ... |
      | Screen | S-1.1 | ... | ... |
      ```
    - Coverage statistics
    - Gaps and orphaned items

### Finalize Phase 10

11. **Update Context Memory**
    - Add documentation decisions to `discovery_context.json`
    - Record file counts and statistics
    - Update resumption_context for final validation

12. **Update Progress**
    - Set phase `10_docs` to "complete"
    - Update overall_progress
    - Set resumable_from to "11_validate"

## State Updates

### Updated in `_state/`:
- `discovery_config.json` - current_phase, current_checkpoint, updated_at
- `discovery_progress.json` - phase 10 complete, overall_progress
- `discovery_context.json` - key_decisions, resumption_context

### Created in `traceability/`:
- `TRACEABILITY_MATRIX_MASTER.md` - Human-readable traceability report

## Outputs (MANDATORY - 5 files minimum)

| File | Required | Validates |
|------|----------|-----------|
| `ClientAnalysis_<SystemName>/05-documentation/INDEX.md` | ‚úÖ YES | Checkpoint 10 |
| `ClientAnalysis_<SystemName>/05-documentation/README.md` | ‚úÖ YES | Checkpoint 10 |
| `ClientAnalysis_<SystemName>/05-documentation/DOCUMENTATION_SUMMARY.md` | ‚úÖ YES | Checkpoint 10 |
| `ClientAnalysis_<SystemName>/05-documentation/GETTING_STARTED.md` | ‚úÖ YES | Checkpoint 10 |
| `ClientAnalysis_<SystemName>/05-documentation/FILES_CREATED.md` | ‚úÖ YES | Checkpoint 10 |
| `traceability/TRACEABILITY_MATRIX_MASTER.md` | Optional | - |

## üö® MANDATORY: Checkpoint Validation

**BEFORE proceeding to Phase 11, you MUST run:**

```bash
python3 .claude/hooks/discovery_quality_gates.py --validate-checkpoint 10 --dir ClientAnalysis_<SystemName>/
```

**Expected output:**
```
‚úÖ Checkpoint 10 deliverables verified in ClientAnalysis_<SystemName>
```

**If validation FAILS:**
```
‚ùå QUALITY GATE FAILED: Missing mandatory deliverable for Checkpoint 10: 05-documentation/DOCUMENTATION_SUMMARY.md
```
‚Üí **FIX the missing file by running the appropriate skill, then re-validate.**

## Error Handling

- If files missing from expected locations: Note in FILES_CREATED.md
- If traceability gaps found: Document in TRACEABILITY_MATRIX_MASTER.md
- Continue with available data
- **DO NOT skip validation** - it prevents incomplete deliverables

## Next Command

After `/discovery-docs-all` AND validation passes:
- Run `/discovery-validate` to validate all cross-references and generate final report
- This is the final step before discovery completion
